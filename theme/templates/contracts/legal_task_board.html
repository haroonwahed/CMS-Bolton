{% extends 'base.html' %}

{% block title %}Legal Task Board{% endblock %}

{% block page_title %}
Legal Task Board
{% endblock %}

{% block page_actions %}
<a href="{% url 'contracts:legal_task_create' %}" class="bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 shadow-sm">New Task</a>
{% endblock %}

{% block content %}
<div class="flex space-x-4 overflow-x-auto p-2">
    {% for status_display, tasks in tasks_by_status %}
        <div class="w-80 bg-gray-100 rounded-lg p-4 flex-shrink-0">
            <h3 class="font-bold text-lg mb-4 text-gray-700">{{ status_display }}</h3>
            <div class="space-y-4">
                {% for task in tasks %}
                    <div class="bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition-shadow">
                        <div class="flex justify-between items-start">
                            <p class="font-semibold text-gray-800">{{ task.title }}</p>
                            <span class="px-2 py-1 text-xs font-semibold leading-tight rounded-full
                                {% if task.priority == 'HIGH' %} bg-red-100 text-red-700 {% endif %}
                                {% if task.priority == 'MEDIUM' %} bg-yellow-100 text-yellow-700 {% endif %}
                                {% if task.priority == 'LOW' %} bg-green-100 text-green-700 {% endif %}
                            ">{{ task.get_priority_display }}</span>
                        </div>
                        <p class="text-sm text-gray-600 mt-2">{{ task.subject|truncatewords:15 }}</p>
                        <div class="mt-4 flex items-center justify-between text-sm text-gray-500">
                            <span>Due: {{ task.due_date|default:"N/A" }}</span>
                            <a href="{% url 'contracts:legal_task_update' task.pk %}" class="font-medium text-blue-600 hover:underline">Edit</a>
                        </div>
                    </div>
                {% empty %}
                    <p class="text-sm text-gray-500 italic">No tasks in this column.</p>
                {% endfor %}
            </div>
        </div>
    {% endfor %}
</div>
{% endblock %}

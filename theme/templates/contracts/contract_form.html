{% extends 'base.html' %}

{% block title %}{% if form.instance.pk %}Edit Contract{% else %}New Contract{% endif %}{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto bg-white p-8 rounded-lg shadow-md">
    <h2 class="text-2xl font-bold mb-6">{% if form.instance.pk %}Edit Contract{% else %}Create a New Contract{% endif %}</h2>
    <form method="post">
        {% csrf_token %}
        <div class="grid grid-cols-1 gap-6">
            <div>
                <label for="{{ form.title.id_for_label }}" class="block text-sm font-medium text-gray-700">Title</label>
                {{ form.title }}
            </div>
            <div>
                <label for="{{ form.counterparty.id_for_label }}" class="block text-sm font-medium text-gray-700">Counterparty</label>
                {{ form.counterparty }}
            </div>
            <div>
                <label for="{{ form.contract_type.id_for_label }}" class="block text-sm font-medium text-gray-700">Contract Type</label>
                {{ form.contract_type }}
            </div>
            <div>
                <label for="{{ form.jurisdiction.id_for_label }}" class="block text-sm font-medium text-gray-700">Jurisdiction</label>
                {{ form.jurisdiction }}
            </div>
            <div>
                <label for="{{ form.value.id_for_label }}" class="block text-sm font-medium text-gray-700">Value</label>
                {{ form.value }}
            </div>
            <div>
                <label for="{{ form.status.id_for_label }}" class="block text-sm font-medium text-gray-700">Status</label>
                {{ form.status }}
            </div>
            <div>
                <label for="{{ form.milestone_date.id_for_label }}" class="block text-sm font-medium text-gray-700">Milestone Date</label>
                {{ form.milestone_date }}
            </div>
            <div>
                <label for="{{ form.tags.id_for_label }}" class="block text-sm font-medium text-gray-700">Tags</label>
                {{ form.tags }}
                <p class="text-sm text-gray-500 mt-1">Hold down "Control", or "Command" on a Mac, to select more than one.</p>
            </div>
        </div>
        <div class="mt-8">
            <button type="submit" class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700">Save Contract</button>
        </div>
    </form>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // A little bit of JS to add Tailwind classes to the form fields
    document.addEventListener('DOMContentLoaded', function() {
        const fields = ['title', 'counterparty', 'contract_type', 'jurisdiction', 'value', 'status', 'milestone_date', 'tags'];
        fields.forEach(function(field) {
            const element = document.getElementById('id_' + field);
            if (element) {
                element.classList.add('mt-1', 'block', 'w-full', 'rounded-md', 'border-gray-300', 'shadow-sm', 'focus:border-indigo-500', 'focus:ring-indigo-500', 'sm:text-sm');
            }
        });
    });
</script>
{% endblock %}
